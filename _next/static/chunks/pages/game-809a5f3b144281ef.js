(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{4055:function(e,n,t){"use strict";t.r(n);var r=t(76687),o=t(50029),a=t(87794),c=t.n(a),s=t(9008),i=t(67294),l=t(9473),u=t(76509),d=t(3283),f=t.n(d),m=t(85893);function h(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return x(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==t.return||t.return()}finally{if(s)throw a}}}}function x(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}n.default=function(){var e=(0,l.v9)((function(e){return e.blockchain})),n=(0,i.useState)([]),t=n[0],a=n[1],d=(0,i.useState)([]),x=d[0],p=d[1],v=(0,i.useState)([]),b=v[0],g=v[1],y=(0,i.useState)([]),w=y[0],C=y[1],j=(0,i.useState)([]),k=j[0],N=j[1],S=(0,i.useState)([]),O=S[0],A=S[1],I=(0,i.useState)(0),Z=I[0],_=I[1],E=(0,i.useState)(0),F=E[0],M=E[1];(0,i.useEffect)((function(){a([]),e.minerContract&&e.account&&U().then((function(e){a(e)}))}),[e.minerContract,e.account]),(0,i.useEffect)((function(){g([]),e.mineContract&&e.account&&D().then((function(e){g(e)})),N([]),e.mineContract&&e.account&&T().then((function(e){N(e)}))}),[e.mineContract,e.account]),(0,i.useEffect)((function(){q().then((function(e){_(parseFloat(f().utils.fromWei(e.toString())))}))}),[e.diamondContract,e.account]);var q=function(){var n=(0,o.Z)(c().mark((function n(){var t,r,o;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=0,null===(t=e.diamondContract)||void 0===t||!t.methods||!e.account){n.next=5;break}return n.next=4,null===(o=e.diamondContract)||void 0===o?void 0:o.methods.balanceOf(e.account).call();case 4:r=n.sent;case 5:return n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),U=function(){var n=(0,o.Z)(c().mark((function n(){var t,r,o,a,s,i,l,u;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=[],null===(t=e.minerContract)||void 0===t||!t.methods||!e.account){n.next=10;break}return n.next=4,null===(o=e.minerContract)||void 0===o?void 0:o.methods.balanceOf(e.account).call();case 4:if(0===(a=n.sent)){n.next=10;break}return n.next=8,e.minerContract.methods.batchedMinerOfOwner(e.account,0,a).call();case 8:if(s=n.sent){i=h(s);try{for(i.s();!(l=i.n()).done;)u=l.value,r.push(parseInt(u.tokenId))}catch(c){i.e(c)}finally{i.f()}r.sort((function(e,n){return e-n}))}case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),D=function(){var n=(0,o.Z)(c().mark((function n(){var t,r,o,a,s,i,l,u,d,m,x;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=[],null===(t=e.mineContract)||void 0===t||!t.methods||!e.account){n.next=18;break}return n.next=4,null===(o=e.mineContract)||void 0===o?void 0:o.methods.ownedStakesBalance(e.account).call();case 4:if(0===(a=n.sent)){n.next=18;break}return n.next=8,e.mineContract.methods.batchedStakesOfOwner(e.account,0,a).call();case 8:if(!(s=n.sent)){n.next=18;break}l=[],u=h(s);try{for(u.s();!(d=u.n()).done;)m=d.value,l.push(parseInt(m.tokenId)),r.push(parseInt(m.tokenId))}catch(c){u.e(c)}finally{u.f()}return n.next=15,null===(i=e.mineContract)||void 0===i?void 0:i.methods.YIELD_CPS().call();case 15:x=n.sent,setInterval((function(){var e,n=parseFloat(f().utils.fromWei("0","ether")),t=h(s);try{for(t.s();!(e=t.n()).done;){var r=e.value;n+=parseFloat(f().utils.fromWei((Math.round(Date.now()-Math.round(1e3*r.startTimestamp))*("0"===r.level?1:5)*parseFloat(x)/1e3).toString(),"ether"))}}catch(c){t.e(c)}finally{t.f()}M(n)}),100),r.sort((function(e,n){return e-n}));case 18:return n.abrupt("return",r);case 19:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),T=function(){var n=(0,o.Z)(c().mark((function n(){var t,r,o,a,s,i,l,u;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=[],null===(t=e.mineContract)||void 0===t||!t.methods||!e.account){n.next=10;break}return n.next=4,null===(o=e.mineContract)||void 0===o?void 0:o.methods.ownedCooldownsBalance(e.account).call();case 4:if(0===(a=n.sent)){n.next=10;break}return n.next=8,e.mineContract.methods.batchedCooldownsOfOwner(e.account,0,a).call();case 8:if(s=n.sent){i=h(s);try{for(i.s();!(l=i.n()).done;)u=l.value,r.push(parseInt(u.tokenId))}catch(c){i.e(c)}finally{i.f()}r.sort((function(e,n){return e-n}))}case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),W=function(){var n=(0,o.Z)(c().mark((function n(){var t,r,o;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:null!==(t=e.diamondContract)&&void 0!==t&&t.methods&&null!==(r=e.mineContract)&&void 0!==r&&r.methods&&e.account&&(null===(o=e.mineContract)||void 0===o||o.methods.claimDiamondsAndMaybeUnstake(b,!1).send({to:u.q7.mine,from:e.account,value:0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),L=function(){var n=(0,o.Z)(c().mark((function n(){var t,r,o;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:null!==(t=e.diamondContract)&&void 0!==t&&t.methods&&null!==(r=e.mineContract)&&void 0!==r&&r.methods&&e.account&&(null===(o=e.mineContract)||void 0===o||o.methods.claimDiamondsAndMaybeUnstake(w,!0).send({to:u.q7.mine,from:e.account,value:0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),P=function(){var n=(0,o.Z)(c().mark((function n(){var t,r,o,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===(t=e.mineContract)||void 0===t||!t.methods||!e.account){n.next=5;break}return n.next=3,null===(r=e.minerContract)||void 0===r?void 0:r.methods.isApprovedForAll(e.account,u.q7.mine).call();case 3:n.sent?null===(o=e.mineContract)||void 0===o||o.methods.stakeMany(x).send({to:u.q7.mine,from:e.account,value:0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})):null===(a=e.minerContract)||void 0===a||a.methods.setApprovalForAll(u.q7.mine,!0).send({to:u.q7.mine,from:e.account,value:0}).then((function(){var n;null===(n=e.mineContract)||void 0===n||n.methods.stakeMany(x).send({to:u.q7.mine,from:e.account,value:0}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(s.default,{children:(0,m.jsx)("title",{children:"Game | MinerVerse"})}),u.e1.whitelistOnly&&(u.e1.whitelistedWallets.find((function(n){var t;return n.toLowerCase()===(null===(t=e.account)||void 0===t?void 0:t.toLowerCase())||""}))?(0,m.jsx)("section",{className:"text-gray-900 bg-gray-900 body-font h-full",children:(0,m.jsxs)("div",{className:"flex flex-col justify-center items-center space-y-5 overflow-auto pt-44",children:[(0,m.jsxs)("div",{className:"text-xl text-center bg-gray-700 text-white shadow-lg p-6 px-12 rounded-lg",children:[(0,m.jsxs)("h5",{children:["Total Diamonds: ",Z.toFixed(5)," \ud83d\udc8e"]}),(0,m.jsxs)("h5",{children:["Earned Diamonds: ",F.toFixed(5)," \ud83d\udc8e"]}),(0,m.jsx)("button",{onClick:W,className:"mt-4 bg-rose-500 rounded-lg p-2 px-4",children:"Claim"})]}),(0,m.jsxs)("div",{className:"px-11 text-center w-full",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between w-full mb-4 p-2 px-3 bg-gray-700 text-white rounded-lg shadow-lg",children:[(0,m.jsx)("h3",{className:"font-bold text-xl",children:"Staked"}),(0,m.jsxs)("div",{className:"flex space-x-3",children:[(0,m.jsx)("button",{onClick:function(){C([])},className:"py-1 px-3 bg-gray-400 hover:bg-gray-500 rounded-md",children:"Unselect"}),(0,m.jsx)("button",{onClick:function(){C((0,r.Z)(b))},className:"py-1 px-3 bg-gray-400 hover:bg-gray-500 rounded-md",children:"Select All"}),(0,m.jsx)("button",{disabled:0===w.length,onClick:L,className:"py-1 px-3 bg-rose-500 disabled:hover:bg-rose-500 hover:bg-rose-600 rounded-md",children:"Unstake"})]})]}),(0,m.jsx)("div",{className:"flex flex-wrap justify-center",children:b.map((function(e){return(0,m.jsx)("div",{onClick:function(){var n=w.indexOf(e);C(n>-1?w.filter((function(n){return n!==e})):[].concat((0,r.Z)(w),[e]))},className:"relative text-white shadow-lg p-4 mr-1 mb-1 w-[100px] cursor-pointer "+(-1!==w.indexOf(e)?" bg-gray-500":"bg-gray-700"),children:(0,m.jsx)("p",{className:"",children:e})},e)}))})]}),(0,m.jsxs)("div",{className:"px-11 text-center w-full",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between w-full mb-4 p-2 px-3 bg-gray-700 text-white rounded-lg shadow-lg",children:[(0,m.jsx)("h3",{className:"font-bold text-xl",children:"Not Staked"}),(0,m.jsxs)("div",{className:"flex space-x-3",children:[(0,m.jsx)("button",{onClick:function(){p([])},className:"py-1 px-3 bg-gray-400 hover:bg-gray-500 rounded-md",children:"Unselect"}),(0,m.jsx)("button",{onClick:function(){p((0,r.Z)(t))},className:"py-1 px-3 bg-gray-400 hover:bg-gray-500 rounded-md",children:"Select All"}),(0,m.jsx)("button",{disabled:0===x.length,onClick:P,className:"py-1 px-3 bg-rose-500 disabled:hover:bg-rose-500 hover:bg-rose-600 rounded-md",children:"Stake"})]})]}),(0,m.jsx)("div",{className:"flex flex-wrap justify-center",children:t.map((function(e){return(0,m.jsx)("div",{onClick:function(){var n=x.indexOf(e);p(n>-1?x.filter((function(n){return n!==e})):[].concat((0,r.Z)(x),[e]))},className:"relative text-white shadow-lg p-4 mr-1 mb-1 w-[100px] cursor-pointer "+(-1!==x.indexOf(e)?" bg-gray-500":"bg-gray-700"),children:(0,m.jsx)("p",{className:"",children:e})},e)}))})]})," ",(0,m.jsxs)("div",{className:"px-11 text-center w-full",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between w-full mb-4 p-2 px-3 bg-gray-700 text-white rounded-lg shadow-lg",children:[(0,m.jsx)("h3",{className:"font-bold text-xl",children:"Cooldown"}),(0,m.jsxs)("div",{className:"flex space-x-3",children:[(0,m.jsx)("button",{onClick:function(){A([])},className:"py-1 px-3 bg-gray-400 hover:bg-gray-500 rounded-md",children:"Unselect"}),(0,m.jsx)("button",{onClick:function(){A((0,r.Z)(k))},className:"py-1 px-3 bg-gray-400 hover:bg-gray-500 rounded-md",children:"Select All"}),(0,m.jsx)("button",{disabled:0===x.length,onClick:P,className:"py-1 px-3 bg-rose-500 disabled:hover:bg-rose-500 hover:bg-rose-600 rounded-md",children:"Withdraw"})]})]}),(0,m.jsx)("div",{className:"flex flex-wrap justify-center",children:k.map((function(e){return(0,m.jsx)("div",{onClick:function(){var n=O.indexOf(e);A(n>-1?O.filter((function(n){return n!==e})):[].concat((0,r.Z)(O),[e]))},className:"relative text-white shadow-lg p-4 mr-1 mb-1 w-[100px] cursor-pointer "+(-1!==O.indexOf(e)?" bg-gray-500":"bg-gray-700"),children:(0,m.jsx)("p",{className:"",children:e})},e)}))})]})]})}):(0,m.jsx)(m.Fragment,{}))]})}},43790:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return t(4055)}])}},function(e){e.O(0,[774,888,179],(function(){return n=43790,e(e.s=n);var n}));var n=e.O();_N_E=n}]);