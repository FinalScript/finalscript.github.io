(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{87818:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var a=n(67294),s=n(9473),r=n(3283),i=n.n(r),l=n(76509),o=n(29513),c=n(25675),d=n.n(c),u=n(41664),p=n.n(u),x=n(50029),h=n(87794),m=n.n(h),f=n(12305),v=function(e){return{type:"FETCH_DATA_FAILED",payload:e}},y=n(57592),b=n(33065),g=n(69415),S=n(85893),j=function(){var e=(0,s.I0)(),t=(0,s.v9)((function(e){return e.blockchain})),n=(0,s.v9)((function(e){return e.contractData})),r=(0,s.v9)((function(e){return e.general})),c=(0,a.useState)(""),u=c[0],h=c[1],j=(0,a.useState)(0),w=j[0],N=j[1],k=["Fair sale (first come, first serve)","Price: ".concat(i().utils.fromWei(n.price)," AVAX \ud83d\udd3a"),"Presale Supply: ".concat(n.maxPresaleSupply," Miners"),"Total Supply: ".concat(n.maxTotalSupply," Miners"),"".concat(t.hasMetaMask?100-n.superPercentage:0,"% chance to mint a Regular Miner"),"".concat(n.superPercentage,"% chance to mint a Super Miner")];(0,a.useEffect)((function(){e(function(){var e=(0,x.Z)(m().mark((function e(t){var n,a,s,r,i,l,o,c,d,u,p,x,h;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.h.getState().blockchain.smartContract;case 3:if(!(n=e.sent)){e.next=51;break}return e.next=7,null===n||void 0===n?void 0:n.methods.BASE_SUPER_PERCENTAGE().call();case 7:return a=e.sent,e.next=10,null===n||void 0===n?void 0:n.methods.MAX_PER_MINT().call();case 10:return s=e.sent,e.next=13,null===n||void 0===n?void 0:n.methods.NFT_TAX().call();case 13:return r=e.sent,e.next=16,null===n||void 0===n?void 0:n.methods.baseSupply().call();case 16:return i=e.sent,e.next=19,null===n||void 0===n?void 0:n.methods.presaleSupply().call();case 19:return l=e.sent,e.next=22,null===n||void 0===n?void 0:n.methods.MAX_BASE_SUPPLY().call();case 22:return o=e.sent,e.next=25,null===n||void 0===n?void 0:n.methods.MAX_PRESALE_SUPPLY().call();case 25:return c=e.sent,e.next=28,null===n||void 0===n?void 0:n.methods.totalSupply().call();case 28:return d=e.sent,e.next=31,null===n||void 0===n?void 0:n.methods.presaleOpen().call();case 31:return u=e.sent,e.next=34,null===n||void 0===n?void 0:n.methods.baseSalesOpen().call();case 34:return p=e.sent,e.next=37,null===n||void 0===n?void 0:n.methods.gameStarted().call();case 37:if(x=e.sent,h=0,!p){e.next=45;break}return e.next=42,null===n||void 0===n?void 0:n.methods.BASE_MINT_PRICE().call();case 42:h=e.sent,e.next=48;break;case 45:return e.next=47,null===n||void 0===n?void 0:n.methods.PRESALE_MINT_PRICE().call();case 47:h=e.sent;case 48:t({type:"FETCH_DATA_SUCCESS",payload:{superPercentage:parseFloat(a),maxPerMint:parseInt(s),nftTax:r,baseSupply:parseInt(i),presaleSupply:parseInt(l),maxBaseSupply:parseInt(o),maxPresaleSupply:parseInt(c),maxTotalSupply:parseInt(o)+parseInt(c),totalSupply:d,presaleOpen:u,baseSalesOpen:p,gameStarted:x,price:h}}),e.next=52;break;case 51:t(v({errorMsg:"Smart contract doesn't exist"}));case 52:e.next=58;break;case 54:e.prev=54,e.t0=e.catch(0),console.log(e.t0),t(v({errorMsg:e.t0}));case 58:case"end":return e.stop()}}),e,null,[[0,54]])})));return function(t){return e.apply(this,arguments)}}())}),[t.smartContract]),(0,a.useEffect)((function(){var n;h(""),t.account&&e((n=t.account,function(){var e=(0,x.Z)(m().mark((function e(t){var a,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.h.getState().blockchain.smartContract;case 3:if(!(a=e.sent)){e.next=11;break}return e.next=7,null===a||void 0===a?void 0:a.methods.isWhiteListed(n).call();case 7:s=e.sent,t({type:"UPDATE_IS_WHITELISTED",payload:{isWhiteListed:s}}),e.next=12;break;case 11:t(v({errorMsg:"Smart contract doesn't exist"}));case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),t(v({errorMsg:e.t0}));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()))}),[t.account,t.network]),(0,a.useEffect)((function(){N(""!==u?parseFloat(n.price)*parseFloat(u)+parseFloat(n.nftTax):0)}),[u]);return(0,S.jsxs)("div",{className:"relative overflow-auto",children:[(0,S.jsx)("div",{className:"fixed -z-30 w-screen h-screen overflow-hidden select-none",children:(0,S.jsx)(d(),{src:"/assets/images/mine-entrance.png",layout:"fill",objectFit:"cover",objectPosition:"70%"})}),(0,S.jsx)("div",{className:"fixed -z-20 w-full h-full bg-gray-800 opacity-30"}),(0,S.jsx)("section",{className:"text-gray-400 body-font h-screen flex items-center",children:(0,S.jsx)("div",{className:"container relative mx-auto mt-56 sm:mt-44 md:mt-0 flex px-5 md:flex-row justify-center items-center",children:!r.isLoading&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(y.E.div,{exit:{opacity:0,scale:0},initial:"hidden",animate:"visible",variants:{hidden:{scale:.8,opacity:0},visible:{scale:1,opacity:1,transition:{duration:.3,delay:.3}}},className:"absolute -z-20 w-[650px] min-w-[650px] h-[740px] min-h-[740px] overflow-hidden select-none",children:(0,S.jsx)(d(),{src:"/assets/images/parchment.png",layout:"fill",objectFit:"contain"})},"minting-container-background"),(0,S.jsx)(y.E.div,{exit:{opacity:0,scale:0},initial:"hidden",animate:"visible",variants:{hidden:{scale:.8,opacity:0},visible:{scale:1,opacity:1,transition:{duration:.3,delay:.3}}},className:"w-[420px] relative min-w-[420px]  text-gray-900 rounded-xl pb-4 md:mt-0",children:(0,S.jsxs)("div",{className:"flex flex-col",children:[(0,S.jsx)("h2",{className:"text-center text-2xl font-bold title-font rounded-t-xl mb-1",children:(0,S.jsx)("span",{children:"Mint Miners"})}),(0,S.jsxs)("div",{className:"relative text-md flex space-y-2 flex-col items-center",children:[(0,S.jsx)("h5",{children:"Welcome to MinerVerse, gameplay starts at ___"}),(0,S.jsx)("div",{className:"w-2/5 h-28 relative",children:(0,S.jsx)(d(),{src:"/assets/images/MinerTrio.png",objectFit:"contain",layout:"fill"})})]}),(0,S.jsxs)("div",{className:"relative mb-3",children:[(0,S.jsx)("div",{className:"flex justify-end mb-1",children:(0,S.jsx)("span",{className:"text-sm font-medium text-gray-900",children:function(){var e="- / -";return n.totalSupply&&(n.baseSalesOpen||n.gameStarted&&!n.presaleOpen?(e=n.totalSupply+" / "+n.maxTotalSupply,n.totalSupply===n.maxTotalSupply&&(e="Sold Out")):e=n.totalSupply+" / "+n.maxPresaleSupply),e}()})}),(0,S.jsx)("div",{className:"w-full bg-yellow-900 rounded-full h-1.5",children:(0,S.jsx)("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:function(){var e="0%";n.totalSupply&&(e=n.baseSalesOpen||n.gameStarted&&!n.presaleOpen?(n.totalSupply/n.maxTotalSupply*100).toFixed(2)+"%":(n.totalSupply/n.maxPresaleSupply*100).toFixed(2)+"%");return e}()}})})]}),(0,S.jsxs)("div",{className:"relative mb-3",children:[(0,S.jsxs)("label",{htmlFor:"quantity",className:"leading-7 mb-1 text-sm text-gray-900 flex justify-between",children:[(0,S.jsx)("span",{className:"font-bold",children:"Quantity"}),(0,S.jsxs)("span",{className:"tracking-widest",children:["MAX (",n.maxPerMint,")"]})]}),(0,S.jsx)("input",{disabled:!(n.presaleOpen&&n.isWhiteListed||n.baseSalesOpen),title:n.isWhiteListed||!n.baseSalesOpen?"":"You're not whitelisted",type:"text",id:"quantity",name:"quantity",min:0,max:n.maxPerMint,onSelect:function(e){"0"===u&&h("")},value:u,onChange:function(e){var t=e.target,n=t.value,a=t.min,s=t.max;isNaN(n)?h(""):(n=Math.max(Number(a),Math.min(Number(s),Number(n))).toString(),h("0"===n?"":n))},placeholder:"Max ".concat(n.maxPerMint," at a time"),className:"w-full text-center disabled:cursor-not-allowed placeholder:text-gray-700 bg-zinc-400 bg-opacity-20 focus:bg-transparent focus:ring-2 rounded border border-gray-600  text-base outline-none py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"})]}),(0,S.jsxs)("div",{className:"relative tracking-widest mb-2 flex justify-between text-sm font-bold",children:[(0,S.jsx)("h5",{children:"NFT Tax"}),(0,S.jsx)("h5",{children:0===w?"--":i().utils.fromWei(n.nftTax)+" AVAX"})]}),(0,S.jsxs)("div",{className:"relative tracking-widest mb-2 flex justify-between text-md font-bold",children:[(0,S.jsx)("h5",{children:"Total"}),(0,S.jsxs)("h5",{children:[0===w?"--":i().utils.fromWei(w.toString())+" AVAX"," "]})]}),(0,S.jsx)("div",{className:"relative mb-4 flex justify-between",children:(0,S.jsxs)("h5",{className:"text-xs text-gray-800",children:["Miners are utility NFTs solely intended for playing MinerVerse that carry no expectation of profit and have no guaranteed resale value. By buying you agree to the"," ",(0,S.jsx)(p(),{href:"/tos",children:(0,S.jsx)("span",{className:"font-bold text-blue-600 cursor-pointer",children:"Terms of Service"})}),"."]})}),(0,S.jsx)("div",{className:"relative mb-4",children:t.hasMetaMask?t.account?(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("button",{disabled:!(n.presaleOpen&&n.isWhiteListed||n.baseSalesOpen||!t.isRightNetwork),onClick:function(){t.isRightNetwork?setTimeout((function(){var a;if(""===u&&e((0,b.V_)({key:"QuantityInputError",isError:!0,errorMsg:"Enter a quantity (0-".concat(n.maxPerMint,")")})),t.smartContract&&t.account&&""!==u)if(n.baseSalesOpen)null===(a=t.smartContract)||void 0===a||a.methods.mintBase(parseInt(u)).send({gasLimit:String(855e3),to:l.d.contractAddress,from:t.account,value:w}).once("error",(function(e){console.log(e)})).then((function(n){t.account&&e((0,o.cr)(t.account)),e((0,b.V_)({isError:!1,key:"Transaction-"+n.transactionHash,hash:n.transactionHash,link:"https://testnet.snowtrace.io/tx/".concat(n.transactionHash)})),console.log(n)})).catch((function(e){console.log(e)}));else if(n.presaleOpen&&n.isWhiteListed){var s;null===(s=t.smartContract)||void 0===s||s.methods.presaleMintBase(parseInt(u)).send({gasLimit:String(855e3),to:l.d.contractAddress,from:t.account,value:w}).once("error",(function(e){console.log(e)})).then((function(n){t.account&&e((0,o.cr)(t.account)),e((0,b.V_)({isError:!1,key:"Transaction-"+n.transactionHash,hash:n.transactionHash,link:"https://testnet.snowtrace.io/tx/".concat(n.transactionHash)})),console.log(n.transactionHash)})).catch((function(e){console.log(e)}))}}),100):(0,o.If)()},title:!n.isWhiteListed&&n.baseSalesOpen&&t.isRightNetwork?"You're not whitelisted":"",className:"w-full text-white text-shadow-white font-bold border-0 py-2 px-8 disabled:cursor-not-allowed focus:outline-none rounded text-lg shadow-center-lg "+(t.isRightNetwork?"bg-cyan-400  hover:bg-cyan-500 shadow-cyan-500":" bg-red-600 cursor-pointer shadow-red-700"),children:t.isRightNetwork?"Mint":"Switch Network \ud83d\udd3a"})}):(0,S.jsx)("button",{onClick:function(){e((0,o.$j)())},className:"w-full bg-cyan-400 hover:bg-cyan-500 shadow-center-lg shadow-cyan-500 font-semibold text-gray-900 rounded-lg px-3 py-2 ",children:"Connect Wallet"}):(0,S.jsx)(g.G,{})}),(0,S.jsxs)("div",{className:"relative flex flex-col text-sm ",children:[(0,S.jsx)("h5",{className:"font-bold text-lg text-center mb-2",children:"Sale Details"}),k.map((function(e,t){return(0,S.jsxs)("h5",{className:"flex justify-between",children:[(0,S.jsx)("span",{children:"\ud83d\udc8e"})," ",(0,S.jsx)("span",{children:e})," ",(0,S.jsx)("span",{children:"\ud83d\udc8e"})]},t)}))]})]})},"minting-container")]})})})]})}},45301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(87818)}])}},function(e){e.O(0,[774,888,179],(function(){return t=45301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);